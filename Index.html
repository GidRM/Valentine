<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíå A Very Serious Valentine Proposal</title>
  <style>
    :root{
      --bg1:#0f1020; --bg2:#ff3d77; --bg3:#ffd166; --card:#ffffffee; --ink:#141414;
      --yes:#22c55e; --no:#ef4444; --mid:#3b82f6;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; overflow:hidden;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 800px at 15% 20%, rgba(255,61,119,.35), transparent 60%),
        radial-gradient(1000px 700px at 85% 25%, rgba(255,209,102,.35), transparent 55%),
        radial-gradient(900px 600px at 50% 80%, rgba(59,130,246,.25), transparent 55%),
        linear-gradient(135deg, var(--bg1), #1b1c33);
      display:grid; place-items:center;
    }

    /* cinematic intro overlay */
    .intro{
      position:fixed; inset:0; display:grid; place-items:center;
      background: radial-gradient(900px 500px at 50% 50%, rgba(255,255,255,.08), transparent 60%),
                  linear-gradient(180deg, rgba(0,0,0,.92), rgba(0,0,0,.92));
      z-index:50;
      animation: introFade 6.2s ease forwards;
    }
    @keyframes introFade{
      0%,70%{opacity:1}
      100%{opacity:0; pointer-events:none}
    }
    .introCard{
      text-align:center;
      width:min(92vw, 620px);
      padding:26px 22px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:#fff;
      backdrop-filter: blur(10px);
      box-shadow: 0 30px 90px rgba(0,0,0,.5);
    }
    .introTitle{
      letter-spacing:.22em;
      text-transform:uppercase;
      font-size:12px;
      opacity:.85;
      margin-bottom:10px;
    }
    .introBig{
      font-size:30px;
      line-height:1.15;
      margin:0 0 12px;
      text-shadow: 0 10px 30px rgba(0,0,0,.5);
    }
    .introSub{
      margin:0;
      opacity:.9;
      font-size:14px;
    }
    .bar{
      height:10px; margin:16px auto 0;
      width:min(360px, 80%);
      border-radius:999px;
      background: rgba(255,255,255,.14);
      overflow:hidden;
    }
    .bar > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, #ff3d77, #ffd166, #3b82f6);
      animation: loadBar 5.6s ease forwards;
    }
    @keyframes loadBar{ to{ width:100% } }

    /* main card */
    .wrap{
      width:min(92vw, 680px);
      position:relative;
    }
    .card{
      background:var(--card);
      border-radius:26px;
      padding:22px;
      border:1px solid rgba(255,255,255,.45);
      box-shadow: 0 24px 80px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      position:relative;
    }
    h1{margin:0 0 8px; font-size:28px}
    p{margin:0 0 14px; line-height:1.45}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.08);
      font-weight:700;
      font-size:13px;
    }
    .grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
      margin-top:14px;
    }
    @media (max-width: 640px){
      .grid{grid-template-columns:1fr}
    }
    .panel{
      background: rgba(0,0,0,.06);
      border-radius:18px;
      padding:14px;
      border:1px solid rgba(0,0,0,.06);
    }
    .panel h2{
      margin:0 0 10px;
      font-size:14px;
      text-transform:uppercase;
      letter-spacing:.12em;
      opacity:.8;
    }
    .buttons{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    button{
      border:0; cursor:pointer; font-weight:800;
      padding:12px 14px; border-radius:16px;
      font-size:16px;
      transition: transform .12s ease, filter .12s ease;
      user-select:none; touch-action:manipulation;
    }
    button:active{transform:scale(.985)}
    #yes{background:var(--yes); color:#fff; flex:1}
    #maybe{background:var(--mid); color:#fff; flex:1}
    #no{background:var(--no); color:#fff; flex:1; position:relative}

    .tiny{
      font-size:12px; opacity:.72; margin-top:10px
    }
    .result{
      margin-top:14px;
      padding:14px;
      border-radius:18px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(0,0,0,.08);
      display:none;
    }
    .result.show{display:block}

    /* roast meter */
    .meterRow{display:flex; align-items:center; justify-content:space-between; gap:12px}
    .meter{
      height:12px; flex:1;
      background: rgba(0,0,0,.12);
      border-radius:999px;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.08);
    }
    .meter > div{
      height:100%;
      width: 8%;
      background: linear-gradient(90deg, #22c55e, #ffd166, #ff3d77);
      transition: width .25s ease;
    }
    .meterLabel{font-weight:800; font-size:12px; white-space:nowrap}

    /* floating hearts */
    .heart{
      position:absolute;
      font-size:18px;
      opacity:.92;
      animation: floatUp linear forwards;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.25));
      pointer-events:none;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) scale(.9); opacity:.92; }
      to{ transform: translateY(-120vh) scale(1.45); opacity:0; }
    }

    /* confetti */
    .confetti{
      position:absolute; width:10px; height:14px;
      opacity:.95;
      animation: confettiFall linear forwards;
      pointer-events:none;
    }
    @keyframes confettiFall{
      from{ transform: translateY(-20vh) rotate(0deg); }
      to{ transform: translateY(120vh) rotate(720deg); }
    }

    /* signature footer */
    .footer{
      margin-top:12px;
      text-align:center;
      font-size:12px;
      opacity:.65;
    }

    /* ‚Äúcontract‚Äù list */
    ul{margin:10px 0 0; padding-left:18px}
    li{margin:8px 0}
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size:12px;
      padding:2px 6px;
      border-radius:8px;
      background: rgba(0,0,0,.08);
      border:1px solid rgba(0,0,0,.08);
    }
  </style>
</head>
<body>

  <div class="intro" id="intro">
    <div class="introCard">
      <div class="introTitle">A LIMITED-TIME EVENT</div>
      <h2 class="introBig">Valentine‚Äôs Day: Friendship DLC üíò</h2>
      <p class="introSub">Loading emotional support‚Ä¶ please stand by.</p>
      <div class="bar"><div></div></div>
      <p class="introSub" style="margin-top:12px; opacity:.75">No cringe. Minimal cringe. Okay, some cringe.</p>
    </div>
  </div>

  <div class="wrap">
    <div class="card" id="card">
      <div class="pill">üíå For <span id="toName">you</span> <span style="opacity:.55">‚Ä¢</span> from <span id="fromName">me</span></div>
      <h1 style="margin-top:10px">Will you be my Valentine‚Ä¶</h1>
      <p id="lead">
        ‚Ä¶but like, in the <b>friendship</b> way. Because love comes in many forms and
        you‚Äôre one of my favorite humans to exist near.
      </p>

      <div class="grid">
        <div class="panel">
          <h2>The Extremely Official Friend Valentine Contract</h2>
          <p style="margin:0 0 10px">
            By accepting, you agree to the following terms:
          </p>
          <ul>
            <li>We celebrate love <b>without</b> the pressure, the drama, or the weird couples‚Äô photoshoot.</li>
            <li>You receive unlimited (reasonable) emotional support, memes, and hype.</li>
            <li>If anyone asks, we say: <span class="kbd">‚ÄúYes. It‚Äôs friendship. Try to keep up.‚Äù</span></li>
            <li>Optional add-on: snacks. Always snacks.</li>
          </ul>

          <div class="buttons" style="margin-top:14px; position:relative">
            <button id="yes">YES üíò</button>
            <button id="maybe">MAYBE üòè</button>
            <button id="no">NO üôÉ</button>
          </div>

          <div class="tiny" id="hint">
            Pro tip: the ‚ÄúNO‚Äù button has commitment issues.
          </div>

          <div class="result" id="result"></div>
        </div>

        <div class="panel">
          <h2>Affectionate Sarcasm Level</h2>
          <div class="meterRow">
            <div class="meter"><div id="meterFill"></div></div>
            <div class="meterLabel" id="meterLabel">8%</div>
          </div>
          <p class="tiny" style="margin-top:10px" id="roastLine">
            Initializing gentle roasting‚Ä¶
          </p>

          <hr style="border:0; height:1px; background:rgba(0,0,0,.08); margin:12px 0">

          <h2>Mode</h2>
          <p class="tiny" style="margin-top:0">
            This link adapts. You can send it <b>soft</b> or <b>chaos</b>.
            <br>Look at the URL params later like a wizard.
          </p>
          <p class="tiny" style="margin-top:10px">
            Try: <span class="kbd">?to=Alex&from=You&mode=chaos&roast=1</span>
          </p>
        </div>
      </div>

      <div class="footer">Built with love, science, and a tiny bit of nonsense.</div>
    </div>
  </div>

<script>
  // -------------------- URL personalization --------------------
  const params = new URLSearchParams(location.search);
  const to = params.get("to") || "you";
  const from = params.get("from") || "me";
  const mode = (params.get("mode") || "soft").toLowerCase(); // soft | chaos
  const roastOn = (params.get("roast") ?? "1") !== "0"; // default on
  const note = params.get("note") || ""; // optional extra line

  document.getElementById("toName").textContent = to;
  document.getElementById("fromName").textContent = from;

  // Optional: slight copy tweaks by mode
  const lead = document.getElementById("lead");
  if(mode === "chaos"){
    lead.innerHTML = `‚Ä¶in the <b>friendship</b> way. Because Valentine‚Äôs Day is basically a yearly pop-quiz on emotions,
      and I‚Äôm choosing <b>you</b> as my study buddy.`;
    document.getElementById("hint").textContent = `Pro tip: the ‚ÄúNO‚Äù button is in a situationship with ‚Äúrunning away.‚Äù`;
  }

  // -------------------- vibe: intro + small haptic --------------------
  window.addEventListener("load", () => {
    try{ navigator.vibrate?.(35); }catch(e){}
    setTimeout(()=>{ try{ navigator.vibrate?.([20,30,20]); }catch(e){} }, 800);
  });

  // -------------------- floating hearts background --------------------
  function spawnHeart(){
    const h = document.createElement("div");
    h.className = "heart";
    h.textContent = ["üíñ","üíò","üíù","üíó","üíû","‚ù§Ô∏è","‚ú®"][Math.floor(Math.random()*7)];
    h.style.left = Math.random()*100 + "vw";
    h.style.bottom = "-30px";
    h.style.fontSize = (14 + Math.random()*22) + "px";
    h.style.animationDuration = (4 + Math.random()*4) + "s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 9000);
  }
  setInterval(spawnHeart, 480);

  // -------------------- confetti --------------------
  function confettiBurst(){
    const colors = ["#ff3d77","#ffd166","#22c55e","#3b82f6","#a855f7","#ff7a00"];
    for(let i=0;i<95;i++){
      const c = document.createElement("div");
      c.className = "confetti";
      c.style.left = Math.random()*100 + "vw";
      c.style.top = (-10 - Math.random()*30) + "vh";
      c.style.background = colors[Math.floor(Math.random()*colors.length)];
      c.style.animationDuration = (2.6 + Math.random()*2.3) + "s";
      c.style.width = (6 + Math.random()*8) + "px";
      c.style.height = (8 + Math.random()*14) + "px";
      document.body.appendChild(c);
      setTimeout(()=>c.remove(), 6500);
    }
  }

  // -------------------- affectionate sarcasm meter --------------------
  const meterFill = document.getElementById("meterFill");
  const meterLabel = document.getElementById("meterLabel");
  const roastLine = document.getElementById("roastLine");
  let meter = 8;

  const roastSoft = [
    "You‚Äôre basically a premium subscription to comfort.",
    "Your existence improves the vibe. This is not up for debate.",
    "You deserve good things. Like snacks. And peace.",
    "I appreciate you more than my phone appreciates charging overnight."
  ];
  const roastChaos = [
    "You‚Äôre my favorite disaster (compliment).",
    "If being iconic was illegal, you‚Äôd be on a watchlist.",
    "You‚Äôre the reason my ‚Äòpeople are okay‚Äô folder still exists.",
    "You have the audacity to be lovable. Rude."
  ];

  function bumpMeter(amount){
    meter = Math.min(100, meter + amount);
    meterFill.style.width = meter + "%";
    meterLabel.textContent = meter + "%";
    if(roastOn){
      const lines = (mode === "chaos") ? roastChaos : roastSoft;
      roastLine.textContent = lines[Math.floor(Math.random()*lines.length)];
    }else{
      roastLine.textContent = "Roasting disabled. Pure wholesome mode engaged.";
    }
  }

  // -------------------- buttons logic --------------------
  const card = document.getElementById("card");
  const result = document.getElementById("result");
  const btnYes = document.getElementById("yes");
  const btnMaybe = document.getElementById("maybe");
  const btnNo = document.getElementById("no");

  function escapeHtml(str){
    return str.replace(/[&<>"']/g, m => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
    }[m]));
  }

  function finish(answer){
    confettiBurst();
    bumpMeter(22);
    result.classList.add("show");

    const extra = note ? `<div style="margin-top:10px; opacity:.9">üí¨ <i>${escapeHtml(note)}</i></div>` : "";

    const messageYes = `
      <div style="font-size:18px"><b>‚úÖ CONTRACT ACCEPTED</b></div>
      <div style="margin-top:8px">
        <span style="font-size:18px">Happy Valentine‚Äôs Day, ${escapeHtml(to)}.</span>
      </div>
      <div style="margin-top:10px">
        This is your reminder that you are <b>loved</b>, <b>valued</b>, and honestly kind of a big deal.
      </div>
      ${extra}
      <div style="margin-top:12px; font-weight:800">Now go drink water and accept my friendship hug. ü´∂</div>
    `;

    const messageMaybe = `
      <div style="font-size:18px"><b>üü¶ MAYBE DETECTED</b></div>
      <div style="margin-top:8px">
        Classic. Respect. We‚Äôll treat this as a <b>provisional yes</b> pending snack negotiations.
      </div>
      <div style="margin-top:10px">
        Either way: I‚Äôm glad you exist, ${escapeHtml(to)}.
      </div>
      ${extra}
      <div style="margin-top:12px; font-weight:800">Proceed to collect your complimentary hype. üéüÔ∏è‚ú®</div>
    `;

    const messageNo = `
      <div style="font-size:18px"><b>üü• ‚ÄúNO‚Äù REGISTERED</b> (allegedly)</div>
      <div style="margin-top:8px">
        That‚Äôs okay. I will simply continue caring about you‚Ä¶ <b>from a respectful distance</b>‚Ä¶ with memes.
      </div>
      <div style="margin-top:10px">
        Happy Valentine‚Äôs Day anyway, ${escapeHtml(to)}. Friendship doesn‚Äôt require permission. It just happens.
      </div>
      ${extra}
      <div style="margin-top:12px; font-weight:800">Also your ‚ÄúNO‚Äù button tried to escape, so‚Ä¶ ü§®</div>
    `;

    result.innerHTML = (answer === "yes") ? messageYes : (answer === "maybe") ? messageMaybe : messageNo;

    btnYes.disabled = true;
    btnMaybe.disabled = true;
    btnNo.disabled = true;
    btnNo.style.filter = "grayscale(1)";
  }

  // No button runs away (but less aggressively on mobile)
  function moveNoButton(){
    bumpMeter(mode === "chaos" ? 9 : 6);

    const rect = card.getBoundingClientRect();
    const btnRect = btnNo.getBoundingClientRect();

    const pad = 12;
    const maxX = rect.width - btnRect.width - pad*2;
    const maxY = rect.height - btnRect.height - pad*2;

    const x = pad + Math.random()*Math.max(0, maxX);
    const y = pad + Math.random()*Math.max(0, maxY);

    btnNo.style.position = "absolute";
    btnNo.style.left = x + "px";
    btnNo.style.top  = y + "px";

    // playful captions
    const captionsSoft = ["Not today üòå", "Try again üôÇ", "Friendship is scary, I get it", "Nope (but I still love you)"];
    const captionsChaos = ["NOPE üèÉüí®", "COWARDICE DETECTED", "You can't outrun affection", "Error 404: cold heart not found"];
    btnNo.textContent = (mode === "chaos")
      ? captionsChaos[Math.floor(Math.random()*captionsChaos.length)]
      : captionsSoft[Math.floor(Math.random()*captionsSoft.length)];
  }

  // attach events
  btnNo.addEventListener("mouseenter", moveNoButton);
  btnNo.addEventListener("touchstart", (e)=>{ e.preventDefault(); moveNoButton(); }, {passive:false});

  // If they actually manage to click NO (rare), accept it gracefully
  btnNo.addEventListener("click", ()=> finish("no"));

  btnYes.addEventListener("click", ()=> finish("yes"));
  btnMaybe.addEventListener("click", ()=>{
    bumpMeter(14);
    finish("maybe");
  });

  // A tiny ‚Äúautoplay‚Äù roast bump after intro fades
  setTimeout(()=> bumpMeter(mode === "chaos" ? 10 : 8), 2200);
</script>

</body>
</html>
